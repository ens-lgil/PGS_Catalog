{% extends 'catalog/base.html' %}
{% load static %}

{% block title %}Check metadata{% endblock %}

{% block content %}
    <nav aria-label="You are here:">
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="../../">PGS Catalog</a></li>
        <li class="breadcrumb-item">Check metadata</li>
      </ol>
    </nav>

    {% if uploaded_file %}
      <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
      <script defer src="{% static 'catalog/pgs_metadata_check.js' %}"></script>
    {% endif %}

    <h2>PGS Catalog Check Metadata</h2>

    <form action="/upload/"
            method="post"
            enctype="multipart/form-data"
            class="dropzone d-flex"
            id="dropzone">
        {% csrf_token %}
        <!--<input type="file" class="btn btn-pgs" id="myfilename="myfile">-->
        <div class="custom-file mr-5" style="max-width:250px">
          <input type="file" class="custom-file-input" id="myfile" name="myfile">
          <label class="custom-file-label" for="myfile">Choose file</label>
        </div>
        <button class="btn btn-pgs" style="display:none" id="upload_btn">Upload</button>
      </form>

      <div class="mt-3">
        {% if uploaded_file %}
          <div id="uploaded_filename" class="mb-3" data-value="{{ filename }}"><b>Uploaded file:</b> {{ filename }}</div>
          <div id="check_status"></div>
          <div id="check_report" class="mt-3">
            <!-- Spinner -->
            <div id="pgs_loading" class="d-flex justify-content-center">
              <div class="spinner-border pgs_color_1" role="status">
                <span class="sr-only">Loading...</span>
              </div>
            </div>
            <div class="d-flex justify-content-center mt-2">Data checking ...</div>
          </div>
        {% else %}
          <div id="error_file_extension" class="clearfix" style="display:none">
            <div class="mt-3 float_left pgs_note pgs_note_2">
              <div>
                <span></span>The file extension is not <b>xlsx</b>.
              </div>
            </div>
          </div>

          <div class="clearfix">
            <div class="mt-3 float_left pgs_note pgs_note_1">
              <div>
                <span></span>Please, upload an Excel file.
              </div>
            </div>
          </div>
        {% endif %}
      </div>

{% endblock %}
